% !TEX ROOT = ../root.tex

\begin{tikzpicture}
\tikzmath{
	\cx=0; \cy=0; \wdt=2.5; \hgt=2;
	\dx=0.25; \dxx=0.7;
	\cxx=\cx+\wdt+\dx; 
	\cxxx=\cxx+\wdt+\dx;
	\civ=\cxxx+\wdt+\dx;
	\Rly=\cy-0.5*\hgt-2*\dx;
	\cyy=\Rly-2.5*\dx;
	\cyyy=\Rly+2.5*\dx;
}
\tikzstyle{every node}=[font=\small]

% NUMBER LINE
\begin{scope}[shift={(0,\Rly)}]
% rho_0
\draw[thick,dashed] (\cx+0.5*\wdt+0.5*\dx,6*\dx) -- (\cx+0.5*\wdt+0.5*\dx,-6*\dx) node[anchor=south,pos=0] {$\rho_0$};
% rho_1
\draw[thick,dashed] (\cxx+0.5*\wdt+0.5*\dx,6*\dx) -- (\cxx+0.5*\wdt+0.5*\dx,-6*\dx) node[anchor=south,pos=0] {$\rho_1$};
% rho_2
\draw[thick,dashed] (\cxxx+0.5*\wdt+0.5*\dx,6*\dx) -- (\cxxx+0.5*\wdt+0.5*\dx,-6*\dx) node[anchor=south,pos=0] {$\rho_2$};
% reals
\draw[ultra thick,<->] (\cx-0.5*\wdt-2*\dx,0) -- (\civ+0.5*\wdt+2*\dx,0) node[anchor=west] {\Large $\real$};
\end{scope}

%% TOP TEXT
\node[anchor=south] at (\cx,\cy-\dx) {$\pmet < \pmet_0$};
\node[anchor=south] at (\cxx,\cy-\dx) {$\pmet \in [\pmet_0,\pmet_1)$};
\node[anchor=south] at (\cxxx,\cy-\dx) {$\pmet\in[\pmet_1,\pmet_2)$};
\node[anchor=south] at (\civ,\cy-\dx) {$\pmet > \pmet_2$};

%% TOP BOXES
% Case 1
\pane{\cx}{\cyy}{0}{\wdt}{0.5*\hgt}{0.2}{draw,color=red!50!white,fill=red!10!white}
\node[] at (\cx,\cyy) {\begin{tabular}{l}
$\tr \leftarrow \tr / \alpha $ \\
$\zb \leftarrow \zb$ 
\end{tabular}};

% Case 2
\pane{\cxx}{\cyy}{0}{\wdt}{0.5*\hgt}{0.2}{draw,color=yellow!70!black,fill=yellow!10!white}
\node[] at (\cxx,\cyy) {\begin{tabular}{l}
$\tr \leftarrow \tr / \alpha$ \\
$\zb \leftarrow \z^*$ 
\end{tabular}};

% Case 3
\pane{\cxxx}{\cyy}{0}{\wdt}{0.5*\hgt}{0.2}{draw,color=green!50!white!80!black,fill=green!10!white}
\node[] at (\cxxx,\cyy) {\begin{tabular}{l} 
$\tr \leftarrow \tr$ \\
$\zb \leftarrow \z^*$ 
\end{tabular}};

% Case 4
\pane{\civ}{\cyy}{0}{\wdt}{0.5*\hgt}{0.2}{draw,color=green!50!white!80!black,fill=green!10!white}
\node[] at (\civ,\cyy) {\begin{tabular}{l}
$\tr \leftarrow \beta \tr$ \\
$\zb \leftarrow \z^*$
\end{tabular}};

%% BOTTOM BOXES
% Case 1
\pane{\cx}{\cyyy}{0}{\wdt}{0.5*\hgt}{0.2}{draw,color=green!50!white!80!black,fill=green!10!white}
\node[] at (\cx,\cyyy) {\begin{tabular}{l}
$\tr \leftarrow \beta \tr $ \\
$\zb \leftarrow \z^*$ 
\end{tabular}};

% Case 2
\pane{\cxx}{\cyyy}{0}{\wdt}{0.5*\hgt}{0.2}{draw,color=green!50!white!80!black,fill=green!10!white}
\node[] at (\cxx,\cyyy) {\begin{tabular}{l}
$\tr \leftarrow  \tr$ \\
$\zb \leftarrow \z^*$ 
\end{tabular}};

% Case 3
\pane{\cxxx}{\cyyy}{0}{\wdt}{0.5*\hgt}{0.2}{draw,color=yellow!70!black,fill=yellow!10!white}
\node[] at (\cxxx,\cyyy) {\begin{tabular}{l}
$\tr \leftarrow \tr / \alpha$ \\
$\zb \leftarrow \z^*$ 
\end{tabular}};

% Case 4
\pane{\civ}{\cyyy}{0}{\wdt}{0.5*\hgt}{0.2}{draw,color=red!50!white,fill=red!10!white}
\node[] at (\civ,\cyyy) {\begin{tabular}{l}
$\tr \leftarrow \tr / \alpha$ \\
$\zb \leftarrow \zb$
\end{tabular}};

%% LEFT TEXT
\node[text width=2cm, anchor=east, align=right] at (\cx-0.5*\wdt-2*\dx,\cyy) {\textit{Rel.~decrement}};
\node[text width=2cm, anchor=east, align=right] at (\cx-0.5*\wdt-2*\dx,\cyyy) {\textit{Rel.~error}};

\end{tikzpicture}